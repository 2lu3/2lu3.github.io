
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="./theme/pygments/github.min.css">



  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/solid.css">


  <link rel="shortcut icon" href="/assets/favicon.png" type="image/x-icon">
  <link rel="icon" href="/assets/favicon.png" type="image/x-icon">


  <link href="https://2lu3.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="2lu3の三日坊主日記 Atom">



 

<meta name="author" content="2lu3" />
<meta name="description" content="OSSの論文管理ソフトzoteroとwebdavを組み合わせることで論文を(実質)無制限にアップロードできるようになる方法を説明します。" />
<meta name="keywords" content="ubuntu, vps, zotero, 論文管理">


  <meta property="og:site_name" content="2lu3の三日坊主日記"/>
  <meta property="og:title" content="zoteroで論文をwebdavに保存する"/>
  <meta property="og:description" content="OSSの論文管理ソフトzoteroとwebdavを組み合わせることで論文を(実質)無制限にアップロードできるようになる方法を説明します。"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="./zoterodelun-wen-wowebdavnibao-cun-suru.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2022-11-16 18:26:19+09:00"/>
  <meta property="article:modified_time" content="2022-11-16 18:46:51+09:00"/>
  <meta property="article:author" content="./author/2lu3.html">
  <meta property="article:section" content="開発環境"/>
  <meta property="article:tag" content="ubuntu"/>
  <meta property="article:tag" content="vps"/>
  <meta property="article:tag" content="zotero"/>
  <meta property="article:tag" content="論文管理"/>
  <meta property="og:image" content="/assets/sitelogo.png">

  <title>2lu3の三日坊主日記 &ndash; zoteroで論文をwebdavに保存する</title>


</head>
<body class="light-theme">

<aside>
  <div>
    <a href="./">
      <img src="/assets/sitelogo.png" alt="" title="">
    </a>

    <h1>
      <a href="./"></a>
    </h1>




    <ul class="social">
      <li>
        <a class="sc-twitter"
           href="https://twitter.com/hi2lu3"
           target="_blank">
          <i class="fa-brands fa-twitter"></i>
        </a>
      </li>
      <li>
        <a class="sc-github"
           href="https://github.com/2lu3"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>

<nav>
  <a href="./">Home</a>

  <a href="https://2lu3.github.io/archives.html">Archives</a>
  <a href="https://2lu3.github.io/categories.html">Categories</a>
  <a href="https://2lu3.github.io/tags.html">Tags</a>

  <a href="https://2lu3.github.io/feeds/all.atom.xml">Atom</a>

</nav>

<article class="single">
  <header>
      
    <h1 id="zoterodelun-wen-wowebdavnibao-cun-suru">zoteroで論文をwebdavに保存する</h1>
    <p>
      Posted on 水 16 11月 2022 in <a href="./category/kai-fa-huan-jing.html">開発環境</a>

    </p>
  </header>


  <div>
    <h1>環境</h1>
<h2>サーバー側</h2>
<ul>
<li>Ubuntu22.04</li>
<li>インストール済みのソフト</li>
<li>docker</li>
</ul>
<h2>手元側</h2>
<ul>
<li>Ubuntu22.04</li>
<li>WindowsでもMacでも同じ方法でできるはず</li>
<li>zotero</li>
<li><a href="https://www.zotero.org/">公式サイト</a>からインストールすべし</li>
</ul>
<h1>サーバー側の作業</h1>
<p>Dockerのインストールはできているものとします。</p>
<p>サーバーのipアドレスが、<code>serverip.com</code>であると仮定して話を進めます。</p>
<p>まず、ドメインを契約しているサービスで、<code>webdav.serverip.com</code>のレコードを作成してください。</p>
<p><code>serverip.com/webdav/</code>をwebdavに割り当てる方法もありますが、あまり好きではないのでサブドメインを設定しています。</p>
<p>その後、以下のように<code>docker-compose.yml</code>を作成してください。</p>
<div class="highlight"><pre><span></span><code><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3&#39;</span><span class="w"></span>
<span class="nt">services</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">https-portal</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">steveltn/https-portal:1</span><span class="w"></span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80:80</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443:443</span><span class="w"></span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">DOMAINS</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;-</span><span class="w"></span>
<span class="w">        </span><span class="no">webdav.server_ip.com -&gt; http://webdav:80,</span><span class="w"></span>
<span class="w">      </span><span class="nt">STAGE</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;production&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">DEBUG</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">      </span><span class="nt">CLIENT_MAX_BODY_SIZE</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"></span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">volume</span><span class="w"></span>
<span class="w">        </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https-portal-data</span><span class="w"></span>
<span class="w">        </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/lib/https-portal</span><span class="w"></span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webdav</span><span class="w"></span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span><span class="w"></span>
<span class="w">  </span><span class="nt">webdav</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bytemark/webdav</span><span class="w"></span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span><span class="w"></span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">AUTH_TYPE</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Basic</span><span class="w"></span>
<span class="w">      </span><span class="nt">USERNAME</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${WEBDAV_USER_NAME}</span><span class="w"></span>
<span class="w">      </span><span class="nt">PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${WEBDAV_PASSWORD}</span><span class="w"></span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bind</span><span class="w"></span>
<span class="w">        </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./webdav/data/</span><span class="w"></span>
<span class="w">        </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/lib/dav</span><span class="w"></span>

<span class="nt">volumes</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">https-portal-data</span><span class="p">:</span><span class="w"></span>
</code></pre></div>

<p><code>https-portal</code>は、certbotによるssl口唇を自動でやってくれるdockerイメージです。言い換えると、https化を自動でしてくれます。</p>
<p><code>DOMAINS</code>で指定しているのは、<code>webdav.server_ip.com</code>に来たリクエストをすべて<code>http://webdav:80</code>に転送するということです。</p>
<p><code>webdav</code>は、webdavサーバーの構築を簡単にできるdockerイメージです。</p>
<p>Basic認証をかけています。dotenvなどを使うか(おすすめ)、<code>.bashrc</code>を使うかして、2つの環境変数をexportしておいてください。</p>
<p>あとは、</p>
<div class="highlight"><pre><span></span><code>mkdir webdav/data
docker compose up -d
</code></pre></div>

<p>とすれば、https化するリバースプロキシと、webdavを建てることができます。</p>
<p>80番と443番のポート開放を忘れないようにしてください。</p>
<h1>手元側の作業</h1>
<p>まず、(Ubuntuなら)ファイルを使ってwebdavにアクセスできることを確認します。私の場合、</p>
<ol>
<li>他の場所</li>
<li><code>davs://webdav.serverip.com</code>と入力</li>
<li>接続</li>
<li>ユーザー名とパスワード入力</li>
</ol>
<p>でできました。</p>
<p>詳しいやり方は、「OS名 webdav 接続」と調べてください。</p>
<p>zoteroをインストールしたあと、「編集」→「設定」→「同期」と移動して、「ファイルの同期」のチェックを入れます</p>
<p>そして、</p>
<p>URL: <code>https://webdav.serverip.com</code></p>
<p>ユーザー名: 先ほど設定したユーザー名(<code>${WEBDAV_USER_NAME}</code>の中身)</p>
<p>パスワード: 先ほど設定したパスワード(<code>${WEBDAV_PASSWORD}</code>の中身)</p>
<p>を入力し、「サーバーを検証する」と押します</p>
<p>そうすると、pdfファイルが自動でwebdavに保存されます。</p>
<p>あとは、<a href="https://qiita.com/Yarakashi_Kikohshi/items/39dfbf3059aaf0690761#-zotero-%E3%81%AE%E7%92%B0%E5%A2%83%E8%A8%AD%E5%AE%9A">Zoteroの環境設定</a>にしたがって設定をしました。ただし、リンク先の記事ではwebdavではなくdropboxを使っているので注意が必要です。</p>
<p>ipadでやるなら、<a href="https://note.com/takeshi_teshima/n/nd28a6e3dfb05">私の研究おすすめツール（文献管理編） </a>がおすすめです。</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="./tag/ubuntu.html">ubuntu</a>
      <a href="./tag/vps.html">vps</a>
      <a href="./tag/zotero.html">zotero</a>
      <a href="./tag/lun-wen-guan-li.html">論文管理</a>
    </p>
  </div>



  <div class="related-posts">
    <h4>You might enjoy</h4>
    <ul class="related-posts">
      <li><a href="./wai-bu-karazi-zhai-pcniakusesu.html">外部から自宅PCにアクセス</a></li>
      <li><a href="./ubuntudemaususu-du-wozi-dong-she-ding.html">ubuntuでマウス速度を自動設定</a></li>
    </ul>
  </div>



</article>

<footer>
<p>&copy;  </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " 2lu3の三日坊主日記 ",
  "url" : ".",
  "image": "/assets/sitelogo.png",
  "description": ""
}
</script>
</body>
</html>