<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>2lu3の三日坊主日記</title><link href="https://2lu3.github.io/" rel="alternate"></link><link href="https://2lu3.github.io/feeds/all.atom.xml" rel="self"></link><id>https://2lu3.github.io/</id><updated>2023-12-04T13:11:08+09:00</updated><entry><title>自宅サーバーと医学科での使用例</title><link href="https://2lu3.github.io/zi-zhai-sa-ba-toyi-xue-ke-denoshi-yong-li.html" rel="alternate"></link><published>2023-11-28T11:43:24+09:00</published><updated>2023-12-04T13:11:08+09:00</updated><author><name>2lu3</name></author><id>tag:2lu3.github.io,2023-11-28:/zi-zhai-sa-ba-toyi-xue-ke-denoshi-yong-li.html</id><summary type="html">&lt;p&gt;自宅サーバーの構成、セットアップ、運用と個人/医学科で使っているサービスの紹介&lt;/p&gt;</summary><content type="html">&lt;h1&gt;本記事の対象者&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;自宅サーバーを作りたい人&lt;/li&gt;
&lt;li&gt;自宅サーバーを運用したい人&lt;/li&gt;
&lt;li&gt;サブスクリプションサービスをself hosted serviceで置換したい人&lt;/li&gt;
&lt;li&gt;botを作りたい人&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;概要&lt;/h1&gt;
&lt;p&gt;自宅サーバー編&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;パーツ選定・組み立て&lt;/li&gt;
&lt;li&gt;初期設定&lt;/li&gt;
&lt;li&gt;まだ導入していないがやりたいこと&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;サービス編&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Slackbot&lt;/li&gt;
&lt;li&gt;Discordbot&lt;/li&gt;
&lt;li&gt;Nextcloud&lt;/li&gt;
&lt;li&gt;Gitlab&lt;/li&gt;
&lt;li&gt;Netdata&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;その他&lt;/p&gt;
&lt;p&gt;おわりに&lt;/p&gt;
&lt;h1&gt;自宅サーバー編&lt;/h1&gt;
&lt;h2&gt;パーツ選定&lt;/h2&gt;
&lt;p&gt;自宅サーバーは人の目に触れないため見た目より性能重視、かつ家のスペースがあまりないので小さい、性能・安全に関係ないところはケチって重要な部品にお金をかけるという方針でパーツの選定を行いました。&lt;/p&gt;
&lt;p&gt;早速ですが、下のパーツを選びました。順に説明します。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;名称&lt;/th&gt;
&lt;th&gt;型番&lt;/th&gt;
&lt;th&gt;値段&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CPU&lt;/td&gt;
&lt;td&gt;Ryzen 5 3600&lt;/td&gt;
&lt;td&gt;10000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GPU&lt;/td&gt;
&lt;td&gt;玄人志向 GeForce GT-730&lt;/td&gt;
&lt;td&gt;5800&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;メモリ&lt;/td&gt;
&lt;td&gt;家に落ちてた16GB x 2&lt;/td&gt;
&lt;td&gt;不明&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SSD&lt;/td&gt;
&lt;td&gt;家に落ちてた1TB&lt;/td&gt;
&lt;td&gt;不明&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HDD&lt;/td&gt;
&lt;td&gt;家に落ちてた6TB(WD Blue) x 2&lt;/td&gt;
&lt;td&gt;不明&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CPUファン&lt;/td&gt;
&lt;td&gt;Noctua NH-L9a&lt;/td&gt;
&lt;td&gt;7200&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ケース&lt;/td&gt;
&lt;td&gt;Thermaltake Core V1&lt;/td&gt;
&lt;td&gt;7258&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ケースファン(2個)&lt;/td&gt;
&lt;td&gt;Noctua NF-A8&lt;/td&gt;
&lt;td&gt;5300&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;電源&lt;/td&gt;
&lt;td&gt;玄人志向 KRPW-L5-500W&lt;/td&gt;
&lt;td&gt;5636&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;マザーボード&lt;/td&gt;
&lt;td&gt;ASRock A520 M-ITX&lt;/td&gt;
&lt;td&gt;16136&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;合計&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;57330&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;CPUは性能が低いが消費電力も低いCeleronが使われますが、私は複数のサービスを運用したいため消費電力が高くなっても性能が比較的良いRyzen 5 3600を選定しました。後述しますが自宅サーバーとしては満足な性能なためワンランク性能が低いCPUでもよかったかもしれないです。CPUは故障しにくいので、メルカリで中古を買うことで安く購入しました。参考までにCPUの性能を示すベンチマークの表を下に示します。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;CPU名&lt;/th&gt;
&lt;th&gt;R23 ベンチマーク&lt;/th&gt;
&lt;th&gt;説明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Intel i9 14900K&lt;/td&gt;
&lt;td&gt;41193&lt;/td&gt;
&lt;td&gt;現在最強のCPU&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Ryzen 9 5950X&lt;/td&gt;
&lt;td&gt;28641&lt;/td&gt;
&lt;td&gt;1世代前最強のCPU&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Ryzen 5 3600&lt;/td&gt;
&lt;td&gt;9150&lt;/td&gt;
&lt;td&gt;今回購入したCPU&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Celeron J4125&lt;/td&gt;
&lt;td&gt;1541&lt;/td&gt;
&lt;td&gt;2019年発売のCeleron&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;GPUは安価なGT-730を選びました。OSのインストールにはGPUが必要なのでGPU内臓のCPUかGPUが必要ですが、私はAI生成などハイエンドGPUを使うタスクをするつもりがなかったので、安さで選びました。ただし、電気代的な意味でファンレスのGT-710にすればよかったと若干後悔しています。もし、GPU内蔵CPUを選んでいたらGPUを購入する必要はないのですが、今後GPUが壊れたかもしれないときに正常に動作するGPUが動作確認用に欲しかったので選びました。&lt;/p&gt;
&lt;p&gt;参考：&lt;a href="https://jyn.jp/running-ryzen-without-gpu/"&gt;Ryzenをグラボ無しで動かす&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;HDDは同じメーカーのものを使用したのですが、RAID(後述)にするのでメーカーを揃えないほうが良かったです。今回採用したRAID1は同時にHDDが壊れるのは1台までという前提条件がありますが、同じメーカーだと同じタイミングで故障する可能性が高くなるからです。また、4台ぐらい使ってRAID6を組みたかったのですが、金銭的な問題で諦めました。&lt;/p&gt;
&lt;p&gt;CPUファンはNoctuaのNH-L9aを選定しました。静音性、トップフロー型、ロープロファイルが特徴です。自宅サーバーの場合就寝するときにうるさいと困るため、冷却力に対して静音性に定評があるNoctuaを購入しました。高級と言われているだけあり私は好みのデザインです。ただ、ケースの高さからすると小型のサイドフロー型のCPUファンでも搭載することができ、そちらのほうが冷却性能が高いのでそちらにすればよかったと後悔しています。&lt;/p&gt;
&lt;p&gt;&lt;img alt="NH-L9a-AM4" src="assets/noctua_nh_l9a_am4_1_2.jpg"&gt;
&lt;a href="https://noctua.at/en/nh-l9a-am4"&gt;Noctua HPより&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ケースを選定する際に重要視したことは、HDDを複数搭載できて、冷却性能が高く、できるだけ小さいことです。HDDを複数搭載する理由は、後述するRAIDを構成するために最大2つのHDDが必要だからです。小さめであることは家のスペース的に必須条件でした。Youtubeや価格.comで見た目が好きなものをピックアップして選びました。&lt;/p&gt;
&lt;p&gt;&lt;img alt="Core V1" src="assets/CA-1B8-00S1WN-00_8c68a2afccf041a99f8c9651e4f945c6.jpg"&gt;
&lt;a href="https://www.thermaltake.com/core-v1.html"&gt;ThermalTake HPより&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ケースファンは同じく静音性の観点でNoctuaを選定しました。おかげで夜中も全くうるさくないです。&lt;/p&gt;
&lt;p&gt;&lt;img alt="NF-A8 PWM" src="assets/nf_a8_1_1_4.jpg"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://noctua.at/en/nf-a8-pwm"&gt;Noctua HPより&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;電源の容量をドスパラの&lt;a href="https://www.dospara.co.jp/5info/cts_str_power_calculation_main.html"&gt;電源電卓&lt;/a&gt;で計算して、私の推しである玄人志向のものを購入しました。私が電源を選定するときに見るポイントは&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;有名メーカーであること&lt;/li&gt;
&lt;li&gt;80PLUSの表示&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;です。1つ目はSILVERSTONE, Thermaltake, Cooler Master, Corsair, 玄人志向, ASUS, MSI, NZXTなど(他にもあります)などの有名なメーカーだと安心して買っています。2つ目は80PLUSという認証のロゴをチェックします。80PLUSにはSTANDARDからTITANIUMまで6つの段階があり、段階が上がるほど変換効率が高くなっていきます。パソコンの消費電力が決まるとどれくらいの電源を購入するべきかが決まるので下の記事を参考にして決めてみましょう。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.dospara.co.jp/monotech/mnt_4950.html"&gt;80PLUSで消費電力はどう変化するのか？ STANDARDからTITANIUMの電源でチェック！　Text by 林 佑樹｜ものテクアーカイブス｜パソコン（PC）通販のドスパラ【公式】&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;マザーボードは、Mini-ITXという最小の規格を選びました。これは先述したように家のスペースの問題から小さな自宅サーバーにする必要があるためです。そのため、拡張性が犠牲になっています。この無骨さが好きです。&lt;/p&gt;
&lt;p&gt;&lt;img alt="PXL_20230720_060115334" src="assets/PXL_20230720_060115334.jpg"&gt;&lt;/p&gt;
&lt;h2&gt;組み立て&lt;/h2&gt;
&lt;p&gt;&lt;img alt="PXL_20230720_055743432" src="assets/PXL_20230720_055743432.jpg"&gt;&lt;/p&gt;
&lt;p&gt;適当なYoutubeの動画と説明書を参照しながら組み立てしました。&lt;/p&gt;
&lt;p&gt;マザボにピンを指すときに違う場所に刺さないように気をつける以外は特に難しいことはなかったです。&lt;/p&gt;
&lt;p&gt;嘘です。以下の点に気をつけながら作業していました。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;CPUがピン折れしないように丁寧に扱う&lt;/li&gt;
&lt;li&gt;グリスの量が多すぎないようにテストしながら決めた&lt;/li&gt;
&lt;li&gt;メンテ性のために各種ケーブルの配線が絡まないようにした&lt;/li&gt;
&lt;li&gt;ケーブルがファンに絶対に巻き込まれないように結束バンドで固定した&lt;/li&gt;
&lt;li&gt;部品を取り付ける順番により組み立て難易度が上下する&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;配線を終わらせて起動確認をしたときの画像↓&lt;/p&gt;
&lt;p&gt;CPUファンが美しく(←?)回転していますね。&lt;/p&gt;
&lt;p&gt;&lt;img alt="PXL_20230720_080959551" src="assets/PXL_20230720_080959551.jpg"&gt;&lt;/p&gt;
&lt;h2&gt;初期設定&lt;/h2&gt;
&lt;p&gt;Ubuntuのインストールから、最低限のセキュリティ対策、そしてドメインから自宅サーバーにアクセスできるように設定します。&lt;/p&gt;
&lt;h3&gt;Ubuntuのインストール&lt;/h3&gt;
&lt;p&gt;使い慣れているという理由でUbuntu serverを選びましたが、DebianやCentOSを選んでもよいです。&lt;/p&gt;
&lt;p&gt;OSをインストールするには、Live USBを作成する必要があります。&lt;/p&gt;
&lt;p&gt;普段使いのPCのOSにより、↓のサイトを参考にしてください。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;windows / mac&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.kabocy.com/linux/6863/"&gt;balenaEtcherを使ってUbuntu ServerのLive USBを作成する方法&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Linux&lt;/li&gt;
&lt;li&gt;上のサイトに加えて↓も&lt;/li&gt;
&lt;li&gt;&lt;a href="https://remylog.com/ubuntu-20-04-balenaetcher-install/"&gt;Ubuntu 20.04 に balenaEtcher をインストールする方法を解説&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Live USBができたら、Ubuntuのインストールです。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://eng-entrance.com/ubuntu-install"&gt;【初心者でもわかる】Ubuntuのインストール方法まとめ&lt;/a&gt;などを参考にしてください。&lt;/p&gt;
&lt;h3&gt;Ubuntuの初期設定&lt;/h3&gt;
&lt;p&gt;sshできるまでは自宅サーバーに直接モニターとキーボードを使って操作する必要があります。&lt;/p&gt;
&lt;h4&gt;ユーザーの作成&lt;/h4&gt;
&lt;p&gt;&lt;a href="https://qiita.com/white_aspara25/items/c1b9d02310b4731bfbaa"&gt;ubuntu ユーザを追加して sudo 権限をつける&lt;/a&gt;を参考に、普段使うユーザーを作成してsudo権限を付与してください。&lt;/p&gt;
&lt;h4&gt;SSHの設定&lt;/h4&gt;
&lt;p&gt;下の注意点を先に読んでから、&lt;a href="https://zenn.dev/uchidaryo/books/ubuntu-2204-server-book/viewer/openssh"&gt;SSH｜Ubuntu 22.04サーバー構築入門&lt;/a&gt;を実行してください。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;sshする際に &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;sv1.example.com&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;が使われていますが、これは自宅サーバーのipアドレスにしてください&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;後述するDNSの設定ができるまで、クライアント(普段使っているPC)と自宅サーバーは同じwifiに接続してください&lt;/li&gt;
&lt;li&gt;ipアドレスは、自宅サーバーで&lt;a href="https://qiita.com/waokitsune/items/8f79b605fc667f964eaf"&gt;Ubuntuで自身のIPアドレス確認コマンド&lt;/a&gt;を実行して調べてください&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;192.168から始まるアドレスがipアドレスです&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;最後の &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;/etc/ssh/sshd_config&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;では、 &lt;/p&gt;
&lt;p&gt;&lt;code&gt;PasswordAuthentication&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;だけでなく &lt;/p&gt;
&lt;p&gt;&lt;code&gt;PermitRootLogin no&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;も変更してください&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;rootユーザーでログインできないようにするためのものです&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;ファイアウォールの設定&lt;/h4&gt;
&lt;p&gt;ファイアウォールは使わないポートを閉じるためのものです。&lt;/p&gt;
&lt;p&gt;不要なポートを開放しておくことはセキュリティリスクになりえます。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# ufw の起動&lt;/span&gt;
$&lt;span class="w"&gt; &lt;/span&gt;systemctl&lt;span class="w"&gt; &lt;/span&gt;start&lt;span class="w"&gt; &lt;/span&gt;ufw

&lt;span class="c1"&gt;# ufwの有効化&lt;/span&gt;
$&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;ufw&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;enable&lt;/span&gt;

&lt;span class="c1"&gt;# sshに使うportは22番&lt;/span&gt;
$&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;ufw&lt;span class="w"&gt; &lt;/span&gt;allow&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;22&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;comment&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ssh&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# 追加した番号が許可されているか確認する&lt;/span&gt;
$&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;ufw&lt;span class="w"&gt; &lt;/span&gt;status
To&lt;span class="w"&gt;                        &lt;/span&gt;Action&lt;span class="w"&gt;     &lt;/span&gt;From
--&lt;span class="w"&gt;                        &lt;/span&gt;------&lt;span class="w"&gt;      &lt;/span&gt;----
&lt;span class="m"&gt;22&lt;/span&gt;&lt;span class="w"&gt;                        &lt;/span&gt;ALLOW&lt;span class="w"&gt;   &lt;/span&gt;Anywhere
&lt;span class="m"&gt;22&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;v6&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt;                   &lt;/span&gt;ALLOW&lt;span class="w"&gt;   &lt;/span&gt;Anywhere&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;v6&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# webサービスを公開する場合、80番と443番を公開する&lt;/span&gt;
$&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;ufw&lt;span class="w"&gt; &lt;/span&gt;allow&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;80&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;comment&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;http&amp;quot;&lt;/span&gt;
$&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;ufw&lt;span class="w"&gt; &lt;/span&gt;allow&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;443&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;comment&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;https&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# 許可したport以外からは拒否する&lt;/span&gt;
$&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;ufw&lt;span class="w"&gt; &lt;/span&gt;default&lt;span class="w"&gt; &lt;/span&gt;deny
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;Dockerの導入&lt;/h4&gt;
&lt;p&gt;世の中に公開されているプログラムはDockerで実行できる形式のものが多いです。&lt;/p&gt;
&lt;p&gt;メリットは&lt;a href="https://qiita.com/kzy83/items/b50e9f105ece463e4ce8"&gt;Dockerのメリット&lt;/a&gt;に書いてあります。&lt;/p&gt;
&lt;p&gt;下の記事にしたがってコマンドを実行してください&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://docs.docker.com/engine/install/ubuntu/"&gt;Install Docker Engine on Ubuntu&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://qiita.com/katoyu_try1/items/1bdaaad9f64af86bbfb7"&gt;ubuntu版Dockerを毎回sudoなしで実行したい&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Docker composeのインストール&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;bash
   sudo apt-get install docker-compose-plugin&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;簡便のために、1つ目の記事に記載されている実行するべきコマンドを下にコピペしたのでそちらでも大丈夫です。&lt;/p&gt;
&lt;p&gt;DockerのApt repositoryの設定&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# Add Docker&amp;#39;s official GPG key:&lt;/span&gt;
sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;update
sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;ca-certificates&lt;span class="w"&gt; &lt;/span&gt;curl&lt;span class="w"&gt; &lt;/span&gt;gnupg
sudo&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;-m&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0755&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-d&lt;span class="w"&gt; &lt;/span&gt;/etc/apt/keyrings
curl&lt;span class="w"&gt; &lt;/span&gt;-fsSL&lt;span class="w"&gt; &lt;/span&gt;&amp;lt;https://download.docker.com/linux/ubuntu/gpg&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;gpg&lt;span class="w"&gt; &lt;/span&gt;--dearmor&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;/etc/apt/keyrings/docker.gpg
sudo&lt;span class="w"&gt; &lt;/span&gt;chmod&lt;span class="w"&gt; &lt;/span&gt;a+r&lt;span class="w"&gt; &lt;/span&gt;/etc/apt/keyrings/docker.gpg

&lt;span class="c1"&gt;# Add the repository to Apt sources:&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;deb [arch=&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;dpkg&lt;span class="w"&gt; &lt;/span&gt;--print-architecture&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot; signed-by=/etc/apt/keyrings/docker.gpg] &amp;lt;https://download.docker.com/linux/ubuntu&amp;gt; \\&lt;/span&gt;
&lt;span class="s2"&gt;  &amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;.&lt;span class="w"&gt; &lt;/span&gt;/etc/os-release&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$VERSION_CODENAME&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot; stable&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;tee&lt;span class="w"&gt; &lt;/span&gt;/etc/apt/sources.list.d/docker.list&lt;span class="w"&gt; &lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;/dev/null
sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;update
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Dockerのインストール&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;docker-ce&lt;span class="w"&gt; &lt;/span&gt;docker-ce-cli&lt;span class="w"&gt; &lt;/span&gt;containerd.io&lt;span class="w"&gt; &lt;/span&gt;docker-buildx-plugin&lt;span class="w"&gt; &lt;/span&gt;docker-compose-plugin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Docker engineが正常にインストールされているか確認する&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;docker&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;hello-world
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;IPアドレスの固定&lt;/h4&gt;
&lt;p&gt;&lt;a href="https://qiita.com/cokemaniaIIDX/items/c4685cc27ef934ec854c"&gt;Ubuntu 22.04 LTS でIPを固定&lt;/a&gt;にしたがってIPアドレスを固定してください。&lt;/p&gt;
&lt;p&gt;もしくは、ルーター側からMACアドレスを使ってIPアドレスを固定することもできます。(詳細はググって）&lt;/p&gt;
&lt;p&gt;好きな方を選んでください。&lt;/p&gt;
&lt;h4&gt;外部からアクセスできるようにする&lt;/h4&gt;
&lt;h5&gt;ドメインの購入&lt;/h5&gt;
&lt;p&gt;ドメインは無料で取得することもできますが、下の点で購入をおすすめします。自宅サーバーを24時間365日稼働させると電気代だけで万/年いくはずなのでそれと比べると安いと言えます。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;デメリットが多い&lt;/li&gt;
&lt;li&gt;自由度が少ない&lt;/li&gt;
&lt;li&gt;詳しくはググって&lt;/li&gt;
&lt;li&gt;費用が安い&lt;/li&gt;
&lt;li&gt;ドメインは初期費用1000円、年1000円程度で維持できる&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ドメインを購入できるサイトはお名前.comなどがありますが、実務ではAWSが使われることが多いと聞くので勉強のためにAWS Route 53を選びました。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://dev.classmethod.jp/articles/route53-domain-2019/"&gt;Route 53 でドメインを取得・購入する（2019版）&lt;/a&gt;にしたがって購入してください。&lt;/p&gt;
&lt;h5&gt;ルーターの設定&lt;/h5&gt;
&lt;p&gt;ポート変換を使って、22,80,443番のポートに来たデータを自宅サーバーに渡すように設定します。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://sekisuiseien.com/computer/11465/"&gt;2台のルータでDMZを用いたネットワークを構築し安全に自宅サーバを公開する&lt;/a&gt;を読み、セキュリティのために2台のルーターを使って自宅サーバー用ネットワークと普段使い用ネットワークを分けることにしました。&lt;/p&gt;
&lt;p&gt;セキュリティリスクを許容できるなら1台でも大丈夫です。&lt;/p&gt;
&lt;h5&gt;DDNSの設定&lt;/h5&gt;
&lt;p&gt;自宅で契約しているインターネットはグローバルIPアドレスがないと思います。グローバルIPアドレス付きの回線は一般に高価です。そもそも、グローバルIPアドレスのメリットは自宅サーバーのIPアドレスはこれだ！と不変であることです。逆に言えば、グローバルでないIPアドレス(プライベート IPアドレス)は数日おきに変更される可能性がありますが変更をその都度反映できればプライベートIPアドレスでも問題ありません。これをDDNSといいます。&lt;/p&gt;
&lt;p&gt;今回は、&lt;a href="https://github.com/crazy-max/ddns-route53"&gt;ddns-route53&lt;/a&gt;を使い現在のIPアドレスを定期的にAWS Route 53に反映させることでグローバルIPアドレスを持っていなくても毎回ドメイン(google.comなど)を入力することで私のサーバーにアクセスできるようになりました。&lt;/p&gt;
&lt;p&gt;ちなみに、ddns-route53は後述するdockerのコンテナとして動かしています。&lt;/p&gt;
&lt;h5&gt;RAIDの作成&lt;/h5&gt;
&lt;p&gt;下の記事を参考にRAID1を構築しました。ストレージ6TB x 2もあったので、最初の同期に数日かかってました。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://qiita.com/hotta_hideyuki/items/696672c5cf48ed6ea686"&gt;mdadmを用いたソフトウェアRAIDの管理 #RAID - Qiita&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;そもそも、RAIDとは複数台のストレージを同時に運用し、1台もしくは複数台が同時に故障してもサービスを継続したままHDDの交換ができるものです。RAIDにはいくつか種類があるのですが、今回私が使ったのはRAID1という2台のHDDをミラーリング(同期)するという方法です。詳細は&lt;a href="https://www.rescue-center.jp/explanation/raid/type.html"&gt;RAIDの種類と構成について｜RAID5、RAID1+0、RAID6｜データ復旧&lt;/a&gt;を参考にしてみてください。通常はRAID専用のNASと呼ばれるパソコンを購入するのですが、自分でRAIDを構築したくなったので自宅サーバーで直接RAIDを構築しています。&lt;/p&gt;
&lt;h3&gt;自宅作業用PCの設定&lt;/h3&gt;
&lt;p&gt;自宅で普段使っているPCから自宅サーバーにドメインでアクセスすることはできませんでした。そのため、&lt;code&gt;/etc/hosts&lt;/code&gt;を編集して&lt;code&gt;2lu3.com&lt;/code&gt;にアクセスすると自宅サーバーのローカルipアドレスに行くように設定しました。&lt;/p&gt;
&lt;h2&gt;まだ導入していないがやりたいこと&lt;/h2&gt;
&lt;h4&gt;Cloudflare&lt;/h4&gt;
&lt;p&gt;Cloudflareを介してのみ自宅サーバーにアクセスするように設定すると、ハッカーからはCloudflareしか見えないため直接自宅サーバーを攻撃することができません。そのため、セキュリティ的にさらに安全になります。&lt;/p&gt;
&lt;p&gt;実際、私の自宅サーバーのアクセスログを見るとWordpressなどの脆弱性を突くようなURLにアクセスしようとしていました。&lt;/p&gt;
&lt;h2&gt;Dockerのサービスデプロイと運用&lt;/h2&gt;
&lt;p&gt;↓は私の使っている設定ファイルの一部です。順に説明していきます。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;3&amp;quot;&lt;/span&gt;
&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;https-portal&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;steveltn/https-portal:1&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;80:80&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;443:443&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;STAGE&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#39;production&amp;#39;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;DOMAINS&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p p-Indicator"&gt;&amp;gt;-&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="no"&gt;nextcloud.2lu3.com -&amp;gt; http://nextcloud:80,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="no"&gt;stat.2lu3.com -&amp;gt; http://stat:19999,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="no"&gt;${BASIC_USER}:${BASIC_PASS}@log.2lu3.com -&amp;gt; http://viewer:9292,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="no"&gt;onedev.2lu3.com -&amp;gt; http://onedev:6610,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="no"&gt;gitlab.2lu3.com -&amp;gt; http://gitlab:80,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="no"&gt;slackbot.2lu3.com -&amp;gt; http://slackbot-pr:3000,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="no"&gt;slackbot-beta.2lu3.com -&amp;gt; http://slackbot-beta:3000,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="no"&gt;directus.2lu3.com -&amp;gt; http://directus:8055,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="no"&gt;2lu3.com -&amp;gt; http://photoprism:2342,&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;DEBUG&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="c1"&gt;#photo.2lu3.com -&amp;gt; http://photoprism:2342,&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;CLIENT_MAX_BODY_SIZE&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;50000M&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;ACCESS_LOG&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;default&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;type&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;volume&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;source&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;https-portal-data&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;target&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/var/lib/https-portal&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/var/run/docker.sock:/var/run/docker.sock:ro&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# DANGEROUS, see the warning above&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;depends_on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;stat&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;default&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;2lu3&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;utmed&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;unless-stopped&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;ddns&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;crazymax/ddns-route53:latest&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;type&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;bind&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;source&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;./ddns-route53&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;target&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/etc/ddns-route53/&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;TZ&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Asia/Tokyo&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;SCHEDULE&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;0&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;*/3&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;*&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;*&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;*&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;LOG_LEVEL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;info&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;LOG_JSON&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;false&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;DDNSR53_CREDENTIALS_ACCESSKEYID&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;DDNSR53_CREDENTIALS_SECRETACCESSKEY&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;DDNSR53_ROUTE53_HOSTEDZONEID&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;unless-stopped&lt;/span&gt;


&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;stat&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;netdata/netdata:stable&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;hostname&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;stat.2lu3.com&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;cap_add&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;SYS_PTRACE&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;SYS_ADMIN&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;security_opt&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;apparmor:unconfined&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;netdataconfig:/etc/netdata&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;netdatalib:/var/lib/netdata&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;netdatacache:/var/cache/netdata&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/etc/passwd:/host/etc/passwd:ro&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/etc/group:/host/etc/group:ro&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/proc:/host/proc:ro&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/sys:/host/sys:ro&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/etc/os-release:/host/etc/os-release:ro&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/var/run/docker.sock:/var/run/docker.sock:ro&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;NETDATA_CLAIM_URL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;https://app.netdata.cloud&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;NETDATA_CLAIM_TOKEN&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;NETDATA_CLAIM_ROOMS&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;always&lt;/span&gt;

&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;https-portal-data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;netdataconfig&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;netdatalib&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;netdatacache&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="nt"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;utmed&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;external&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;2lu3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;external&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Docker (compose)のメリット&lt;/h3&gt;
&lt;p&gt;Dockerはパソコンの中に複数の仮想的なパソコン(コンテナ)を作ることができるソフトウェアです。これにより、複数の全く違うサービスを簡単にインストール/起動/停止することができます。例えば、サービスAはpython3.6が必要なのにサービスBはpython3.7が必要な場合は、1つのパソコンの中に両方を共存させるよりパソコンの中にコンテナを2つつくりそれぞれ3.6と3.7をインストールするほうが便利です。&lt;/p&gt;
&lt;p&gt;また、Dockerと比べて&lt;a href="https://qiita.com/sugurutakahashi12345/items/0b1ceb92c9240aacca02"&gt;Dockerfile と docker-compose を利用すると何がうれしいのか？&lt;/a&gt;にある通り、docker composeを使うと1コマンドで複数のコンテナを同時に起動/停止することができます。&lt;/p&gt;
&lt;h3&gt;複数のdocker composeファイルを使う&lt;/h3&gt;
&lt;p&gt;私の場合、自宅サーバー上には↓の3種類のサービスが動いています。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;私個人用のサービス/bot&lt;/li&gt;
&lt;li&gt;学科同期用のサービス/bot&lt;/li&gt;
&lt;li&gt;自宅サーバーとして動かすために必要最低限のサービス&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;これらの全て1つの&lt;code&gt;docker-compose.yml&lt;/code&gt;ファイルに保存すると非常に長くなりますし、2の学科同期用のサービスを複数人で開発する際に私個人のサービスまで閲覧・変更できてしまうのが好きではありません。&lt;/p&gt;
&lt;p&gt;そのため、3つそれぞれGithubのレポジトリを作り、そのレポジトリを全て自宅サーバー上にダウンロードして別々に起動するようにしています。&lt;/p&gt;
&lt;p&gt;この場合、別ファイル間で通信をするためにnetworkを設定する必要があります。上の設定ファイル例の一番下にnetworksがありutmedと2lu3があります。これはそれぞれ学科同期用のサービスが使うネットワークと私個人のネットワークです。&lt;code&gt;external: True&lt;/code&gt;となっているので、別の設定ファイルにあるコンテナとも共有できるようになっています。&lt;/p&gt;
&lt;h3&gt;Github Actionで自動デプロイ&lt;/h3&gt;
&lt;p&gt;docker composeの設定ファイルを変更したときに毎回自宅サーバーにsshして&lt;code&gt;docker compose up&lt;/code&gt;などのコマンドを実行するのは非常に面倒くさいです。&lt;/p&gt;
&lt;p&gt;そのため、設定ファイルなどが入っているGithubのレポジトリにpushするだけで自動でデプロイするようにGithub Actionsを使って設定しました。&lt;/p&gt;
&lt;p&gt;まず、&lt;a href="https://docs.github.com/en/actions/hosting-your-own-runners/managing-self-hosted-runners/about-self-hosted-runners"&gt;About self-hosted runner&lt;/a&gt;を参考にpushされたときに自動でデプロイするコマンドを実行するためのソフトを自宅サーバーに導入しました。&lt;/p&gt;
&lt;p&gt;次に、pushされたときにどのようなコマンドを実行するかを&lt;code&gt;.github/workflows/deploy.yml&lt;/code&gt;に設定しました。&lt;code&gt;docker compose down&lt;/code&gt;→&lt;code&gt;build&lt;/code&gt;→&lt;code&gt;up&lt;/code&gt;の順に実行しています。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Deploy&lt;/span&gt;

&lt;span class="nt"&gt;on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;push&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;branches&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p p-Indicator"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;main&lt;/span&gt;&lt;span class="p p-Indicator"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;workflow_dispatch&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="nt"&gt;jobs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;deploy&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;runs-on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;self-hosted&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;production&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;steps&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Checkout Repository&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;uses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;actions/checkout@v2&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;build and deploy docker image&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;run&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p p-Indicator"&gt;|&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="no"&gt;docker compose down&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="no"&gt;docker compose build&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="no"&gt;docker compose up -d&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;env&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;DDNSR53_CREDENTIALS_ACCESSKEYID&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${{ secrets.DDNSR53_CREDENTIALS_ACCESSKEYID }}&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;DDNSR53_CREDENTIALS_SECRETACCESSKEY&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${{ secrets.DDNSR53_CREDENTIALS_SECRETACCESSKEY }}&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;DDNSR53_ROUTE53_HOSTEDZONEID&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${{ secrets.DDNSR53_ROUTE53_HOSTEDZONEID }}&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;NETDATA_CLAIM_TOKEN&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${{ secrets.NETDATA_CLAIM_TOKEN }}&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;NETDATA_CLAIM_ROOMS&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${{ secrets.NETDATA_CLAIM_ROOMS }}&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;BASIC_USER&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${{ secrets.BASIC_USER }}&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;BASIC_PASS&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${{ secrets.BASIC_PASS }}&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Notify discord&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;uses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;sarisia/actions-status-discord@v1&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;if&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;always()&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;with&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;webhook&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${{ secrets.DISCORD_WEBHOOK }}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;これにより、pushするだけで自動でデプロイできるようになりました。&lt;/p&gt;
&lt;h1&gt;サービス編&lt;/h1&gt;
&lt;h2&gt;SSL認証を自動定期実行する&lt;/h2&gt;
&lt;p&gt;今どきhttpを使っているサイトはないのでhttpsを使う必要があるのですが、そのためにはlet's encryptなどで証明書を申請して取得する必要があります。しかも証明書は一定期間しか使えないので期限が切れるころに申請することを繰り返す必要があります。&lt;/p&gt;
&lt;p&gt;そんな面倒なことを自動化してくれるのがhttps-portalです。また、サブドメイン(nextcloud.2lu3.comのnextcloudの部分)ごとにどのコンテナのどのポートに繋ぐべきかも設定できるいわゆるリバースプロキシサーバーとしても働けます。&lt;/p&gt;
&lt;p&gt;ただ、ラズパイでは使えなかった気がします。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/SteveLTN/https-portal"&gt;https-portal&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Nextcloud&lt;/h2&gt;
&lt;p&gt;Google Driveに似たストレージサービスです。&lt;/p&gt;
&lt;p&gt;参考記事&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://qiita.com/s_Pure/items/48d3823837e647b57091"&gt;NextcloudをDockerで構築する手順 #Docker - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;NetData&lt;/h2&gt;
&lt;p&gt;サーバーのステータスを外部からネットで確認できるサービスです。他のサービスが使えないときにサーバー自体が生きているかどうかを調べたりできます。また、異常を検知するとメールでお知らせしてくれます。&lt;/p&gt;
&lt;p&gt;&lt;img alt="image-20231130133702561" src="assets/image-20231130133702561.png"&gt;&lt;/p&gt;
&lt;h2&gt;Discord bot&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;前述したGithub Actionの結果&lt;/li&gt;
&lt;li&gt;研究で使っているスパコンのジョブ状態&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;を個人用サーバーに送信してくれます。&lt;/p&gt;
&lt;p&gt;&lt;img alt="image-20231130135012373" src="assets/image-20231130135012373.png"&gt;&lt;/p&gt;
&lt;h2&gt;Slackbot&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;新しいチャンネルの作成を通知する&lt;/li&gt;
&lt;li&gt;特定のリアクションを押すとあるチャネルに転送される&lt;/li&gt;
&lt;li&gt;あるチャンネルに全員招待&lt;/li&gt;
&lt;li&gt;組織英単語などのクイズ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;などの機能があります。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;slack bolt&lt;/code&gt;を利用して開発しています。今後もっと機能を拡張する予定です。&lt;/p&gt;
&lt;h2&gt;Gitlab&lt;/h2&gt;
&lt;p&gt;Githubに大半のコードを保存していますが、一部Githubに保存できないものがあります。そう、Git LFSです。Git LFSは大きなファイルを効率よくバージョン管理するためのシステムですが、無料プランの場合Githubにはわずか1GBしか保存できません。しかし、Gitlabを自宅サーバーにデプロイすれば潤沢なRAIDにLFSを保存することで実質無制限のGit LFSを使えるようになります。&lt;/p&gt;
&lt;p&gt;それでいてGitlabはGithubとUIが近く、しかも下位互換ではないためこれは自宅サーバーで使わない手がないです。&lt;/p&gt;
&lt;h2&gt;Photoprism&lt;/h2&gt;
&lt;p&gt;Google photoと似たやつです。Google photoのデータをエクスポートしてphoto prismにインポートすると一部画像の撮影日付がおかしくなったのと、スマホから自動アップロードができなさそうなので別のOSSを検討しています。&lt;/p&gt;
&lt;h1&gt;その他&lt;/h1&gt;
&lt;h2&gt;Switchbot プラグミニで家の外から再起動&lt;/h2&gt;
&lt;p&gt;基本自宅サーバーは外部からでもsshで操作できますが、何らかの事情によりsshを受け付けないこともあります。そうなったらお手上げで一度家に戻らないと自宅サーバーを再起動することさえできません。&lt;/p&gt;
&lt;p&gt;そんなひどいことがあっていいのでしょうか？&lt;/p&gt;
&lt;p&gt;そこで、switchbot プラグミニを使い外部から再起動できるようにしました。&lt;/p&gt;
&lt;p&gt;&lt;img alt="SwitchBotプラグミニ SwitchBot（スイッチボット） " src="assets/switchbotpuragumini-switchbotsuitsuchibotsuto-130052_700x.jpg"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.switchbot.jp/products/switchbot-plug-mini"&gt;switchbot HPより&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;switchbot プラグミニはコンセントに取り付けることができ、スマホからインターネット経由でコンセントをON/OFFできます。言い換えると、自宅サーバーに取り付ければコンセント抜き差しを家の外から行えるようになります。&lt;/p&gt;
&lt;p&gt;しかし、通常のパソコンはコンセントを刺しただけでは起動しないため、コンセントを刺すと自動で起動するように設定しました。具体的には&lt;a href="https://www.newtech.co.jp/support/faq/n0203/"&gt;N02-03　通電した際に、自動的に起動するようにBIOSを設定したい。 – 株式会社ニューテック&lt;/a&gt;を参考に、BIOSで「Restore on AC Power Loss On」を設定しました。&lt;/p&gt;
&lt;p&gt;この2つにより、外部から強制再起動を行えるようになり安心して遠出できるようになりました。&lt;/p&gt;
&lt;p&gt;さらに、自宅サーバーがどれくらいの電気を使っているのかを可視化できるようになったのが嬉しいポイントです。(11月は50.64kWh=約2000円)&lt;/p&gt;
&lt;h2&gt;iPadでの開発&lt;/h2&gt;
&lt;p&gt;出先でiPad + キーボードを持っていれば、自宅サーバーで開発を行うことができます。具体的には、iPadのTermiusというアプリを使って自宅サーバーにsshして、自宅サーバー内でプログラミング・実行・デバッグを行うことができます。&lt;/p&gt;
&lt;p&gt;通常、iPadではプログラミングが行えないためノートパソコンを持ち運ぶ必要があるのですが、荷物を少なくしたかったり突然できたスキマ時間を開発に当てることができます。&lt;/p&gt;
&lt;h1&gt;おわりに&lt;/h1&gt;
&lt;p&gt;ここまで読んでる方はきっと自作サーバーに興味があると思います。何かを始めるのにベストなタイミングは気が向いたときです。ぜひ自宅サーバーを作りいろんなサービスで遊んでみましょう。&lt;/p&gt;
&lt;p&gt;ちなみに12/4現在自宅サーバーは初期化中なので稼働していません。数日以内に再稼働する予定です。&lt;/p&gt;</content><category term="プログラミング"></category><category term="python"></category><category term="docker"></category><category term="ubuntu"></category><category term="server"></category></entry><entry><title>タンパク質構造をpythonで扱うためのライブラリを調べてみた</title><link href="https://2lu3.github.io/tanpakuzhi-gou-zao-wopythondexi-utamenoraiburariwodiao-betemita.html" rel="alternate"></link><published>2023-02-28T15:13:56+09:00</published><updated>2023-02-28T15:39:44+09:00</updated><author><name>2lu3</name></author><id>tag:2lu3.github.io,2023-02-28:/tanpakuzhi-gou-zao-wopythondexi-utamenoraiburariwodiao-betemita.html</id><summary type="html">&lt;p&gt;タンパク質構造ファイルとpythonで扱うためのライブラリを調べてみた&lt;/p&gt;</summary><content type="html">&lt;h1&gt;前書き&lt;/h1&gt;
&lt;p&gt;今までタンパク質の構造データといえばpdbファイルしか知らなかったのですが、mmCIFという形式があることをボスに教えていただいたのでどんなファイル形式が存在するのか、そしてそのファイルをpythonでいじれるライブラリはどんなものがあるのかを調べてみた。&lt;/p&gt;
&lt;h1&gt;タンパク質構造のファイル形式&lt;/h1&gt;
&lt;h2&gt;PDB&lt;/h2&gt;
&lt;p&gt;拡張子は&lt;code&gt;.pdb&lt;/code&gt;。
タンパク質の構造を記録するファイルで最も有名なのがpdbファイルだと思います。
1行80文字(パンチカードの幅の成約)以内に収まるように設計されています。
ただし、最近になり構造データが大きくなることでpdb形式の限界に到達したため新しい形式の方が良いです。
具体的には、1行80文字なので99,999原子以下かつ36 chainまで、座標は最大4桁という制限があります。&lt;/p&gt;
&lt;h2&gt;mmCIFファイル&lt;/h2&gt;
&lt;p&gt;拡張子は&lt;code&gt;.cif&lt;/code&gt;。
上のPDBファイルの問題点を解消したファイル形式。
結晶構造で使われているCIF形式を、高分子用に拡張しています。&lt;/p&gt;
&lt;h2&gt;PDBML&lt;/h2&gt;
&lt;p&gt;mmCIFファイルをxmlで記述した形式(なので拡張子は&lt;code&gt;.xml&lt;/code&gt;)。
xmlなので多くの分野で使われるツールを使うことができ、XMLスキーマを使った検証も行えます。
PDBデータの正式なXML形式のフォーマットだそうです。&lt;/p&gt;
&lt;h2&gt;その他&lt;/h2&gt;
&lt;p&gt;他にも、NMRで解析した場合に必要なファイルやX線結晶解析の場合に必要なファイルなどがありますが説明は省きます。&lt;/p&gt;
&lt;h1&gt;pythonライブラリ&lt;/h1&gt;
&lt;h2&gt;&lt;a href="https://github.com/rcsb/py-mmcif"&gt;rcsb/py-mmcif: mmCIF Core Access Library&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;This module includes a native Python mmCIF API for data files and dictionaries along with pybind11 wrappers for the PDB C++ Core mmCIF Library.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;とある通り、低レイヤーなAPIを提供しているみたいです。&lt;/p&gt;
&lt;h2&gt;&lt;a href="https://gemmi.readthedocs.io/en/latest/"&gt;GEMMI - library for structural biology — Gemmi 0.5.8 documentation&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Gemmi is a library, accompanied by a set of programs, developed primarily for use in &lt;strong&gt;macromolecular crystallography&lt;/strong&gt; (MX). For working with:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;macromolecular models (content of PDB, PDBx/mmCIF and mmJSON files),&lt;/li&gt;
&lt;li&gt;refinement restraints (CIF files),&lt;/li&gt;
&lt;li&gt;reflection data (MTZ and mmCIF formats),&lt;/li&gt;
&lt;li&gt;data on a 3D grid (electron density maps, masks, MRC/CCP4 format)&lt;/li&gt;
&lt;li&gt;crystallographic symmetry.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;もともと高分子結晶学用に開発されていたライブラリーですが、他にもいろいろ使えるみたいです。&lt;/p&gt;
&lt;p&gt;ドキュメントをチラ見したところ例えば、下のようなものを見つけました。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ファイルからモデルを読み込む&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.jeol.co.jp/words/emterms/20121023.022259.html"&gt;空間群&lt;/a&gt;(対称性を扱う議論らしい)をモデルの中から探す&lt;/li&gt;
&lt;li&gt;&lt;code&gt;find_spacegroup_by_name&lt;/code&gt;みたいなメソッドがあった&lt;/li&gt;
&lt;li&gt;unit cell(結晶学の用語？)や座標を便利に扱える&lt;/li&gt;
&lt;li&gt;ある原子から一定距離にある原子をリストアップする&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a href="https://github.com/samirelanduk/atomium"&gt;samirelanduk/atomium: Python macromolecular parsing (with .pdb/.cif/.mmtf parsing and production)&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;atomium is a molecular modeller and file parser, capable of reading from and writing to .pdb, .cif and .mmtf files.
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;atomium&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;pdb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;atomium&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fetch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;5HVD&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;pdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;chain&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="n"&gt;ligands&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;pdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;chain&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;A&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Chain&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt; &lt;span class="n"&gt;residues&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ReadMeに書いてあるexampleを読んだほうが話が早いですが、構造モデルのchain, atomを検索/取得/追加できます。さらに、近くのatomやchainを調べられます。&lt;/p&gt;
&lt;h2&gt;&lt;a href="https://cctbx.github.io/iotbx/index.html"&gt;iotbx - file readers and writers — CCTBX Developer documentation&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;The iotbx module contains most tools for reading and writing the standard formats used by both macromolecular and small-molecule crystallographers, including PDB, CIF, MTZ, and various other file types. For some formats the resulting data will be encapsulated in objects defined in &lt;a href="https://cctbx.github.io/cctbx/cctbx.html#module-cctbx"&gt;&lt;code&gt;cctbx&lt;/code&gt;&lt;/a&gt; and/or &lt;code&gt;scitbx&lt;/code&gt;; others have custom classes, in particular PDB/mmCIF files which have their own complex internal representation independent of the X-ray scattering properties.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;高分子結晶学でも低分子結晶学でも使えるライブラリーです。ドキュメントをちゃんと読む時間はなかったのですが、上のatomiumと同等の機能はありそうに思えました。&lt;/p&gt;
&lt;h2&gt;&lt;a href="https://github.com/soedinglab/pdbx"&gt;soedinglab/pdbx: pdbx is a parser module in python for structures of the protein data bank in the mmcif format&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Proper recognition to the &lt;a href="http://mmcif.wwpdb.org/docs/sw-examples/python/html/index.html"&gt;Protein Data Bank&lt;/a&gt; where this library for protein structures in the mmCIF format initially came from. We modified the original library to support python3. This fork is used by scripts in the HHsuite &lt;a href="https://github.com/soedinglab/hh-suite"&gt;on GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;チュートリアルが&lt;a href="https://mmcif.wwpdb.org/docs/sw-examples/python/html/"&gt;こちら&lt;/a&gt;。flaskみたいに機能は少なめな気がする。&lt;/p&gt;
&lt;h2&gt;&lt;a href="https://biopython.org/"&gt;Biopython · Biopython&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;タンパク質の構造データ以外にも塩基配列など様々な機能が実装されている巨大なライブラリ。&lt;/p&gt;
&lt;p&gt;Entity→Structure→Model→Chain→Residue→Atomのように分けられているらしい。&lt;/p&gt;
&lt;p&gt;それぞれの値を参照/代入することはもちろん、原子間距離、二面角を求めたりもできる。&lt;/p&gt;
&lt;h1&gt;参考記事&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://pdbj.org/cms-data/workshop/20130823/kinjo.pdf"&gt;PDB データの読み解き方&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://ja.wikipedia.org/wiki/蛋白質構造データバンク"&gt;蛋白質構造データバンク - Wikipedia&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pdbj.org/help/data-format?lang=ja"&gt;PDBデータの書式 - 日本蛋白質構造データバンク&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://bi.biopapyrus.jp/db/pdb.html"&gt;PDB | タンパク質の立体構造データベース&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.jstage.jst.go.jp/article/jcrsj/61/3/61_159/_pdf"&gt;Protein Data Bankで利用するPDBx/mmCIF形式について&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://nc-imr.imr.tohoku.ac.jp/HERMES/Analysis/SPGroup.html"&gt;Space Group for Crystal Structure Analysis&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="研究"></category><category term="protein"></category><category term="pdb"></category><category term="mmcif"></category><category term="python"></category></entry><entry><title>zoteroで論文をwebdavに保存する</title><link href="https://2lu3.github.io/zoterodelun-wen-wowebdavnibao-cun-suru.html" rel="alternate"></link><published>2022-11-16T18:26:19+09:00</published><updated>2022-11-16T18:46:51+09:00</updated><author><name>2lu3</name></author><id>tag:2lu3.github.io,2022-11-16:/zoterodelun-wen-wowebdavnibao-cun-suru.html</id><summary type="html">&lt;p&gt;OSSの論文管理ソフトzoteroとwebdavを組み合わせることで論文を(実質)無制限にアップロードできるようになる方法を説明します。&lt;/p&gt;</summary><content type="html">&lt;h1&gt;環境&lt;/h1&gt;
&lt;h2&gt;サーバー側&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Ubuntu22.04&lt;/li&gt;
&lt;li&gt;インストール済みのソフト&lt;/li&gt;
&lt;li&gt;docker&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;手元側&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Ubuntu22.04&lt;/li&gt;
&lt;li&gt;WindowsでもMacでも同じ方法でできるはず&lt;/li&gt;
&lt;li&gt;zotero&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.zotero.org/"&gt;公式サイト&lt;/a&gt;からインストールすべし&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;サーバー側の作業&lt;/h1&gt;
&lt;p&gt;Dockerのインストールはできているものとします。&lt;/p&gt;
&lt;p&gt;サーバーのipアドレスが、&lt;code&gt;serverip.com&lt;/code&gt;であると仮定して話を進めます。&lt;/p&gt;
&lt;p&gt;まず、ドメインを契約しているサービスで、&lt;code&gt;webdav.serverip.com&lt;/code&gt;のレコードを作成してください。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;serverip.com/webdav/&lt;/code&gt;をwebdavに割り当てる方法もありますが、あまり好きではないのでサブドメインを設定しています。&lt;/p&gt;
&lt;p&gt;その後、以下のように&lt;code&gt;docker-compose.yml&lt;/code&gt;を作成してください。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#39;3&amp;#39;&lt;/span&gt;
&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;https-portal&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;steveltn/https-portal:1&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;80:80&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;443:443&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;DOMAINS&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p p-Indicator"&gt;&amp;gt;-&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="no"&gt;webdav.server_ip.com -&amp;gt; http://webdav:80,&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;STAGE&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#39;production&amp;#39;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;DEBUG&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;CLIENT_MAX_BODY_SIZE&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;type&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;volume&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;source&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;https-portal-data&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;target&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/var/lib/https-portal&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;depends_on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;webdav&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;always&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;webdav&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;bytemark/webdav&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;always&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;AUTH_TYPE&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Basic&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;USERNAME&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${WEBDAV_USER_NAME}&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;PASSWORD&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${WEBDAV_PASSWORD}&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;type&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;bind&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;source&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;./webdav/data/&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;target&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;/var/lib/dav&lt;/span&gt;

&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;https-portal-data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;https-portal&lt;/code&gt;は、certbotによるssl口唇を自動でやってくれるdockerイメージです。言い換えると、https化を自動でしてくれます。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;DOMAINS&lt;/code&gt;で指定しているのは、&lt;code&gt;webdav.server_ip.com&lt;/code&gt;に来たリクエストをすべて&lt;code&gt;http://webdav:80&lt;/code&gt;に転送するということです。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;webdav&lt;/code&gt;は、webdavサーバーの構築を簡単にできるdockerイメージです。&lt;/p&gt;
&lt;p&gt;Basic認証をかけています。dotenvなどを使うか(おすすめ)、&lt;code&gt;.bashrc&lt;/code&gt;を使うかして、2つの環境変数をexportしておいてください。&lt;/p&gt;
&lt;p&gt;あとは、&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mkdir&lt;span class="w"&gt; &lt;/span&gt;webdav/data
docker&lt;span class="w"&gt; &lt;/span&gt;compose&lt;span class="w"&gt; &lt;/span&gt;up&lt;span class="w"&gt; &lt;/span&gt;-d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;とすれば、https化するリバースプロキシと、webdavを建てることができます。&lt;/p&gt;
&lt;p&gt;80番と443番のポート開放を忘れないようにしてください。&lt;/p&gt;
&lt;h1&gt;手元側の作業&lt;/h1&gt;
&lt;p&gt;まず、(Ubuntuなら)ファイルを使ってwebdavにアクセスできることを確認します。私の場合、&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;他の場所&lt;/li&gt;
&lt;li&gt;&lt;code&gt;davs://webdav.serverip.com&lt;/code&gt;と入力&lt;/li&gt;
&lt;li&gt;接続&lt;/li&gt;
&lt;li&gt;ユーザー名とパスワード入力&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;でできました。&lt;/p&gt;
&lt;p&gt;詳しいやり方は、「OS名 webdav 接続」と調べてください。&lt;/p&gt;
&lt;p&gt;zoteroをインストールしたあと、「編集」→「設定」→「同期」と移動して、「ファイルの同期」のチェックを入れます&lt;/p&gt;
&lt;p&gt;そして、&lt;/p&gt;
&lt;p&gt;URL: &lt;code&gt;https://webdav.serverip.com&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ユーザー名: 先ほど設定したユーザー名(&lt;code&gt;${WEBDAV_USER_NAME}&lt;/code&gt;の中身)&lt;/p&gt;
&lt;p&gt;パスワード: 先ほど設定したパスワード(&lt;code&gt;${WEBDAV_PASSWORD}&lt;/code&gt;の中身)&lt;/p&gt;
&lt;p&gt;を入力し、「サーバーを検証する」と押します&lt;/p&gt;
&lt;p&gt;そうすると、pdfファイルが自動でwebdavに保存されます。&lt;/p&gt;
&lt;p&gt;あとは、&lt;a href="https://qiita.com/Yarakashi_Kikohshi/items/39dfbf3059aaf0690761#-zotero-%E3%81%AE%E7%92%B0%E5%A2%83%E8%A8%AD%E5%AE%9A"&gt;Zoteroの環境設定&lt;/a&gt;にしたがって設定をしました。ただし、リンク先の記事ではwebdavではなくdropboxを使っているので注意が必要です。&lt;/p&gt;
&lt;p&gt;ipadでやるなら、&lt;a href="https://note.com/takeshi_teshima/n/nd28a6e3dfb05"&gt;私の研究おすすめツール（文献管理編） &lt;/a&gt;がおすすめです。&lt;/p&gt;</content><category term="開発環境"></category><category term="ubuntu"></category><category term="vps"></category><category term="zotero"></category><category term="論文管理"></category></entry><entry><title>外部から自宅PCにアクセス</title><link href="https://2lu3.github.io/wai-bu-karazi-zhai-pcniakusesu.html" rel="alternate"></link><published>2022-10-09T22:46:47+09:00</published><updated>2022-10-09T23:00:26+09:00</updated><author><name>2lu3</name></author><id>tag:2lu3.github.io,2022-10-09:/wai-bu-karazi-zhai-pcniakusesu.html</id><summary type="html">&lt;p&gt;外出中のみVPS経由で自宅PCにアクセスするための方法について説明します&lt;/p&gt;</summary><content type="html">&lt;h1&gt;はじめに&lt;/h1&gt;
&lt;p&gt;本記事に書いてある手順を実行することは大きなセキュリティリスクになりえます。
セキュリティに関する記事を読み漁りながら安全な方法を見つけたつもりですが、私が知らないセキュリティホールがあるかもしれません。
そのため、この記事を読んだ結果起こったいかなることも責任を負いかねます。つまり、自己責任でお願いします。&lt;/p&gt;
&lt;h1&gt;環境&lt;/h1&gt;
&lt;h2&gt;自宅PC&lt;/h2&gt;
&lt;p&gt;Ubuntu 22.04&lt;/p&gt;
&lt;h2&gt;VPS&lt;/h2&gt;
&lt;p&gt;Ubuntu 22.04&lt;/p&gt;
&lt;h1&gt;事前準備&lt;/h1&gt;
&lt;p&gt;自宅PCに開けるポート：&lt;code&gt;HOME_PORT&lt;/code&gt;
VPSに開けるポート：&lt;code&gt;VPS_PORT&lt;/code&gt;
VPSのIPアドレス：&lt;code&gt;VPS_IP&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;とします。&lt;/p&gt;
&lt;p&gt;例えば、&lt;code&gt;HOME_PORT&lt;/code&gt; = 54321のようになります。&lt;/p&gt;
&lt;p&gt;このうち、&lt;code&gt;HOME_PORT&lt;/code&gt;と&lt;code&gt;VPS_PORT&lt;/code&gt;はシステムポート以外(=1024~65535)で好きな番号を設定してください。&lt;/p&gt;
&lt;p&gt;そして、自宅PCで、&lt;code&gt;~/.remotessh&lt;/code&gt;を作成して、以下のように書き込んでください。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;SSH_VPS_PORT=VPS_PORT
SSH_HOME_PORT=HOME_PORT
SSH_VPS_NAME=VPS_IP
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1&gt;VPS側での作業&lt;/h1&gt;
&lt;p&gt;VPSにsshできる前提で話を進めます。
もし、oepnssh serverがない場合は、自宅PCと同様の作業を行ってください。ただし、&lt;code&gt;HOME_PORT&lt;/code&gt;の代わりに、&lt;code&gt;VPS_PORT&lt;/code&gt;を使う必要があります。&lt;/p&gt;
&lt;h2&gt;公開鍵暗号の作成&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ssh-keygen&lt;span class="w"&gt; &lt;/span&gt;-t&lt;span class="w"&gt; &lt;/span&gt;ed25519&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;vps&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;と実行し、&lt;code&gt;~/.ssh/id_ed25519.pub&lt;/code&gt;の内容をコピーしてください。&lt;/p&gt;
&lt;h2&gt;configファイルの作成&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;~/.ssh/config&lt;/code&gt;ファイルを作成し、以下のように設定してください。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Host 好きな名前
    HostName localhost
    User 自宅PCのユーザー名
    Port VPS_PORT
    ForwardX11 yes # x11 forwardingできるようになる
    ServerAliveInterval 60 # ずっと放置してても繋がり続ける
    IdentityFile ~/.ssh/id_ed25519
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1&gt;自宅PCでの作業&lt;/h1&gt;
&lt;h2&gt;oepnssh serverを建てる&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;openssh-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;vi&lt;span class="w"&gt; &lt;/span&gt;/etc/ssh/sshd_config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;として、&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gh"&gt;#&lt;/span&gt; 変更前
&lt;span class="gh"&gt;#&lt;/span&gt; PORT 22

&lt;span class="gh"&gt;#&lt;/span&gt; 変更後
Port HOME_PORT
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;のように編集してください。&lt;/p&gt;
&lt;p&gt;その後、下のコマンドを実行してopenssh serverを再起動してください。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;systemctl&lt;span class="w"&gt; &lt;/span&gt;restart&lt;span class="w"&gt; &lt;/span&gt;sshd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;&lt;code&gt;HOME_PORT&lt;/code&gt; を開ける&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;-y&lt;span class="w"&gt; &lt;/span&gt;ufw

sudo&lt;span class="w"&gt; &lt;/span&gt;ufw&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;enable&lt;/span&gt;
sudo&lt;span class="w"&gt; &lt;/span&gt;ufw&lt;span class="w"&gt; &lt;/span&gt;allow&lt;span class="w"&gt; &lt;/span&gt;HOME_PORT
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;上のように実行することで、HOME_PORTへのアクセスを許可するように設定します。&lt;/p&gt;
&lt;p&gt;TODO: VPSのIPアドレスからのみ許可する&lt;/p&gt;
&lt;h2&gt;VPSの公開鍵を登録する&lt;/h2&gt;
&lt;p&gt;先ほどコピーした &lt;code&gt;~/.ssh/id_ed25519.pub&lt;/code&gt;の内容を、&lt;code&gt;~/.ssh/authorized_keys&lt;/code&gt;の中に貼り付け、保存してください。&lt;/p&gt;
&lt;h1&gt;実際に接続する&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ssh&lt;span class="w"&gt; &lt;/span&gt;-NR&lt;span class="w"&gt; &lt;/span&gt;VPS_PORT:localhost:HOME_PORT&lt;span class="w"&gt; &lt;/span&gt;VPS_IP
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;上のコマンドを使うことで、&lt;a href="https://qiita.com/mechamogera/items/b1bb9130273deb9426f5"&gt;リモートフォワード&lt;/a&gt;をつなげます。
その結果、VPSのVPS_PORTにアクセスすると、自宅PCのHOME_PORTにアクセスできます。
何も出力されないはずですが、そのまま置いておいてください。&lt;/p&gt;
&lt;p&gt;では、&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;自宅PC→VPSにssh&lt;/li&gt;
&lt;li&gt;VPS→自宅PCにssh&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;して、VPSから自宅PCにsshできることを確かめましょう。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# VPSにsshする&lt;/span&gt;
ssh&lt;span class="w"&gt; &lt;/span&gt;VPS_IP

&lt;span class="c1"&gt;# ここはVPSの中にいる状態です&lt;/span&gt;
ssh&lt;span class="w"&gt; &lt;/span&gt;上で書いた好きな名前
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;うまく行っていれば、上の2行のコマンドを実行するだけで自宅PCにsshできます。&lt;/p&gt;
&lt;h1&gt;リモートフォワードをserviceとして登録する&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;~/.config/systemd/user/remotessh.service&lt;/code&gt;というファイルを作成し、下の内容を書き込んでください。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;外部からssh&amp;quot;&lt;/span&gt;

&lt;span class="k"&gt;[Service]&lt;/span&gt;
&lt;span class="na"&gt;EnvironmentFile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/home/ユーザー名/.remotessh&lt;/span&gt;
&lt;span class="na"&gt;ExecStart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;ssh -NR ${SSH_VPS_PORT}:localhost:${SSH_HOME_PORT} ${SSH_VPS_NAME}&lt;/span&gt;
&lt;span class="na"&gt;ExecStop&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/bin/kill ${MAINPID}&lt;/span&gt;

&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;defalt.target&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;これにより、&lt;code&gt;systemctl --user start remotessh.service&lt;/code&gt;と実行すればVPSから自宅PCにアクセスできるようになり、&lt;code&gt;systemctl --user stop remotessh.service&lt;/code&gt;と実行すればアクセスできないようになります。&lt;/p&gt;
&lt;h1&gt;参考記事&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://frute.hatenablog.com/entry/2018/11/19/003056"&gt;ubuntu自宅サーバにsshで外部からアクセス - 勇往邁進&lt;/a&gt;&lt;/p&gt;</content><category term="開発環境"></category><category term="ssh"></category><category term="ubuntu"></category></entry><entry><title>neovimのcolorscheme選び</title><link href="https://2lu3.github.io/neovimnocolorschemexuan-bi.html" rel="alternate"></link><published>2022-10-09T21:01:42+09:00</published><updated>2022-10-10T10:10:23+09:00</updated><author><name>2lu3</name></author><id>tag:2lu3.github.io,2022-10-09:/neovimnocolorschemexuan-bi.html</id><summary type="html">&lt;p&gt;neovimでいい感じcolorscheme(テーマ)を選び、deinで導入する一連の流れについて説明します。&lt;/p&gt;</summary><content type="html">&lt;h1&gt;vim color schemesで好きなテーマを選ぶ&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://vimcolorschemes.com/"&gt;Trending vim color schemes | vimcolorschemes&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;上のサイトでは、よく使われているテーマを調べることができます。&lt;/p&gt;
&lt;p&gt;自分が好きなテーマを選んでください。&lt;/p&gt;
&lt;h1&gt;deinに追加&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;dein.toml&lt;/code&gt;に以下の内容を追記します。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[[plugins]]&lt;/span&gt;
&lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;テーマのURL&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;その後、&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;colorscheme gruvbox(自分の選んだテーマの名前)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;と、&lt;code&gt;dein.toml&lt;/code&gt;を読み込んだあとに呼び出すようにvimrcに追記しましょう。&lt;/p&gt;</content><category term="開発環境"></category><category term="neovim"></category></entry><entry><title>Rを速習したときのメモ</title><link href="https://2lu3.github.io/rwosu-xi-shitatokinomemo.html" rel="alternate"></link><published>2022-10-09T19:40:54+09:00</published><updated>2022-10-10T10:10:23+09:00</updated><author><name>2lu3</name></author><id>tag:2lu3.github.io,2022-10-09:/rwosu-xi-shitatokinomemo.html</id><summary type="html">&lt;p&gt;Rを速習したときに使ったサイトと軽いメモ&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="https://qiita.com/ninomiyt/items/06fdb1d9052b9b6d8d45"&gt;たのしいR言語入門 - Qiita&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# 代入&lt;/span&gt;

&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# ベクトル&lt;/span&gt;

&lt;span class="nf"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;3.14&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# リスト&lt;/span&gt;
&lt;span class="n"&gt;person&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;名字&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;山田&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;名前&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;太郎&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;性別&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;男&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;person&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;名字

身長&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;160&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;170&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;180&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
体重&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;50&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;60&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;70&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;data.frame&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;身長&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;体重&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;身長

&lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="n"&gt;BMI&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;体重&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;身長&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;100&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# 正規分布の乱数を100万個作る&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;rnorm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1000000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;# ヒストグラムを描く&lt;/span&gt;
&lt;span class="nf"&gt;hist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href="https://qiita.com/piro87084806/items/d75d9bb9a6db4e4d8b9a"&gt;R言語を初めて学んだのでまとめてみた - Qiita&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;■テストの点数を&lt;span class="n"&gt;x&lt;/span&gt;、回数を&lt;span class="n"&gt;yとした際の&lt;/span&gt;、ブートストラップ法で平均値を求める関数の作成例
&lt;span class="n"&gt;avg_function&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;# 平均値を格納するために、空のベクトルaverageを作成&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;average&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;# y回繰り返す処理を作成&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;# test_scoreから復元抽出で7つのデータをサンプリングし、sample_scoreというベクトルに格納する&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;sample_score&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;sample&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;length&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;TRUE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;# meanを使って平均値を計算し、mというベクトルに格納する&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;mean&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sample_score&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;# 計算結果をaverageに格納&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;average&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;average&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;return&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;average&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;# 作成した関数に直接の値で処理する場合&lt;/span&gt;
&lt;span class="nf"&gt;avg_function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;70&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;80&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;55&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;95&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;33&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;63&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# テストの点数が入ったベクトルtest_scoreを作成&lt;/span&gt;
&lt;span class="n"&gt;test_score&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;70&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;80&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;55&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;95&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;33&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;63&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;# 作成した関数にベクトルの値を用いて処理する場合&lt;/span&gt;
&lt;span class="nf"&gt;avg_function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;test_score&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href="https://qiita.com/zettsu-t/items/4e52a877f92c5c05caf8"&gt;Pythonプログラマが30分でわかるR - Qiita&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nf"&gt;is.na&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nf"&gt;is.na&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;NA&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nf"&gt;is.infinite&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nf"&gt;is.infinite&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;Inf&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nf"&gt;is.infinite&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="kc"&gt;Inf&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nf"&gt;is.nan&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;NaN&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="kc"&gt;Inf&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="nf"&gt;is.null&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nf"&gt;is.null&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;NA&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# NA&lt;/span&gt;
&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;NA&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# NA&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;NA: 欠損値&lt;/p&gt;
&lt;p&gt;NAN: 値ではない&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;score_vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;26&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;37&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;48&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;name_vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;bar&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;poi&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;score_vec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;#  ##[1] 15 26 37 48&lt;/span&gt;
&lt;span class="n"&gt;score_vec&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# ##[1] 15&lt;/span&gt;
&lt;span class="n"&gt;score_vec&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# ## [1] 15, 48&lt;/span&gt;

&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# ベクトルの結合&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nf"&gt;NROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# 要素数&lt;/span&gt;
&lt;span class="nf"&gt;seq_len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# range(1,4)&lt;/span&gt;
&lt;span class="nf"&gt;seq_len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;NROW&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# c(1, 2, 3)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;a_lst&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;foo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;score&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;80&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;year&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2019&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;a_lst&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="n"&gt;score&lt;/span&gt;
&lt;span class="n"&gt;a_lst&lt;/span&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;score&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;span class="n"&gt;a_lst&lt;/span&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="プログラミング"></category><category term="R"></category></entry><entry><title>ubuntuでマウス速度を自動設定</title><link href="https://2lu3.github.io/ubuntudemaususu-du-wozi-dong-she-ding.html" rel="alternate"></link><published>2022-10-09T18:01:07+09:00</published><updated>2022-10-09T22:46:47+09:00</updated><author><name>2lu3</name></author><id>tag:2lu3.github.io,2022-10-09:/ubuntudemaususu-du-wozi-dong-she-ding.html</id><summary type="html">&lt;p&gt;ubuntuは設定画面から「マウスの速度」を設定できます。&lt;/p&gt;
&lt;p&gt;しかし、High DPIディスプレイを使っていると設定画面からできる最大速度より速くしたくなります。&lt;/p&gt;
&lt;p&gt;ここでは、ターミナルを起動したときにマウスの速度を設定画面で設定 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;ubuntuは設定画面から「マウスの速度」を設定できます。&lt;/p&gt;
&lt;p&gt;しかし、High DPIディスプレイを使っていると設定画面からできる最大速度より速くしたくなります。&lt;/p&gt;
&lt;p&gt;ここでは、ターミナルを起動したときにマウスの速度を設定画面で設定できる最大値以上にする方法を説明します。&lt;/p&gt;
&lt;h1&gt;方法&lt;/h1&gt;
&lt;h2&gt;デバイスの情報を調べる&lt;/h2&gt;
&lt;p&gt;まず、目的のデバイスのidと名称を調べます。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;xinput&lt;span class="w"&gt; &lt;/span&gt;list
⎡&lt;span class="w"&gt; &lt;/span&gt;Virtual&lt;span class="w"&gt; &lt;/span&gt;core&lt;span class="w"&gt; &lt;/span&gt;pointer&lt;span class="w"&gt;                          &lt;/span&gt;&lt;span class="nv"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;master&lt;span class="w"&gt; &lt;/span&gt;pointer&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)]&lt;/span&gt;
⎜&lt;span class="w"&gt;   &lt;/span&gt;↳&lt;span class="w"&gt; &lt;/span&gt;Virtual&lt;span class="w"&gt; &lt;/span&gt;core&lt;span class="w"&gt; &lt;/span&gt;XTEST&lt;span class="w"&gt; &lt;/span&gt;pointer&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nv"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;slave&lt;span class="w"&gt;  &lt;/span&gt;pointer&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)]&lt;/span&gt;
⎜&lt;span class="w"&gt;   &lt;/span&gt;↳&lt;span class="w"&gt; &lt;/span&gt;Logitech&lt;span class="w"&gt; &lt;/span&gt;MX&lt;span class="w"&gt; &lt;/span&gt;Ergo&lt;span class="w"&gt; &lt;/span&gt;Multi-Device&lt;span class="w"&gt; &lt;/span&gt;Trackball&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nv"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;12&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;slave&lt;span class="w"&gt;  &lt;/span&gt;pointer&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)]&lt;/span&gt;
⎣&lt;span class="w"&gt; &lt;/span&gt;Virtual&lt;span class="w"&gt; &lt;/span&gt;core&lt;span class="w"&gt; &lt;/span&gt;keyboard&lt;span class="w"&gt;                         &lt;/span&gt;&lt;span class="nv"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;master&lt;span class="w"&gt; &lt;/span&gt;keyboard&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="o"&gt;)]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;↳&lt;span class="w"&gt; &lt;/span&gt;Virtual&lt;span class="w"&gt; &lt;/span&gt;core&lt;span class="w"&gt; &lt;/span&gt;XTEST&lt;span class="w"&gt; &lt;/span&gt;keyboard&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="nv"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;slave&lt;span class="w"&gt;  &lt;/span&gt;keyboard&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;↳&lt;span class="w"&gt; &lt;/span&gt;Power&lt;span class="w"&gt; &lt;/span&gt;Button&lt;span class="w"&gt;                              &lt;/span&gt;&lt;span class="nv"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;6&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;slave&lt;span class="w"&gt;  &lt;/span&gt;keyboard&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;↳&lt;span class="w"&gt; &lt;/span&gt;Power&lt;span class="w"&gt; &lt;/span&gt;Button&lt;span class="w"&gt;                              &lt;/span&gt;&lt;span class="nv"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;7&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;slave&lt;span class="w"&gt;  &lt;/span&gt;keyboard&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;↳&lt;span class="w"&gt; &lt;/span&gt;PFU&lt;span class="w"&gt; &lt;/span&gt;Limited&lt;span class="w"&gt; &lt;/span&gt;HHKB-Classic&lt;span class="w"&gt;                  &lt;/span&gt;&lt;span class="nv"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;8&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;slave&lt;span class="w"&gt;  &lt;/span&gt;keyboard&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;↳&lt;span class="w"&gt; &lt;/span&gt;PFU&lt;span class="w"&gt; &lt;/span&gt;Limited&lt;span class="w"&gt; &lt;/span&gt;HHKB-Classic&lt;span class="w"&gt; &lt;/span&gt;Consumer&lt;span class="w"&gt; &lt;/span&gt;Control&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;slave&lt;span class="w"&gt;  &lt;/span&gt;keyboard&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;↳&lt;span class="w"&gt; &lt;/span&gt;PFU&lt;span class="w"&gt; &lt;/span&gt;Limited&lt;span class="w"&gt; &lt;/span&gt;HHKB-Classic&lt;span class="w"&gt; &lt;/span&gt;Keyboard&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="nv"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;slave&lt;span class="w"&gt;  &lt;/span&gt;keyboard&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;↳&lt;span class="w"&gt; &lt;/span&gt;HD&lt;span class="w"&gt; &lt;/span&gt;Pro&lt;span class="w"&gt; &lt;/span&gt;Webcam&lt;span class="w"&gt; &lt;/span&gt;C920&lt;span class="w"&gt;                        &lt;/span&gt;&lt;span class="nv"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;11&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;slave&lt;span class="w"&gt;  &lt;/span&gt;keyboard&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;私の場合、id=12で名前は&lt;code&gt;Logitech MX Ergo Multi-Device Trackball&lt;/code&gt;でした。&lt;/p&gt;
&lt;p&gt;次に、このマウスに設定できるパラメーターを調べます。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$&lt;span class="w"&gt; &lt;/span&gt;xinput&lt;span class="w"&gt; &lt;/span&gt;list-props&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;12&lt;/span&gt;
Device&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Logitech MX Ergo Multi-Device Trackball &amp;#39;&lt;/span&gt;:
&lt;span class="w"&gt;        &lt;/span&gt;Device&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;156&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;Coordinate&lt;span class="w"&gt; &lt;/span&gt;Transformation&lt;span class="w"&gt; &lt;/span&gt;Matrix&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;158&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;.000000,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.000000,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.000000,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.000000,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;.000000,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.000000,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.000000,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.000000,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.000000
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Natural&lt;span class="w"&gt; &lt;/span&gt;Scrolling&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;508&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Natural&lt;span class="w"&gt; &lt;/span&gt;Scrolling&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;Default&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;509&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Scroll&lt;span class="w"&gt; &lt;/span&gt;Methods&lt;span class="w"&gt; &lt;/span&gt;Available&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;510&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Scroll&lt;span class="w"&gt; &lt;/span&gt;Method&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;511&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Scroll&lt;span class="w"&gt; &lt;/span&gt;Method&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;Default&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;512&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Button&lt;span class="w"&gt; &lt;/span&gt;Scrolling&lt;span class="w"&gt; &lt;/span&gt;Button&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;513&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Button&lt;span class="w"&gt; &lt;/span&gt;Scrolling&lt;span class="w"&gt; &lt;/span&gt;Button&lt;span class="w"&gt; &lt;/span&gt;Default&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;514&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Button&lt;span class="w"&gt; &lt;/span&gt;Scrolling&lt;span class="w"&gt; &lt;/span&gt;Button&lt;span class="w"&gt; &lt;/span&gt;Lock&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;515&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Button&lt;span class="w"&gt; &lt;/span&gt;Scrolling&lt;span class="w"&gt; &lt;/span&gt;Button&lt;span class="w"&gt; &lt;/span&gt;Lock&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;Default&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;516&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Middle&lt;span class="w"&gt; &lt;/span&gt;Emulation&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;517&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Middle&lt;span class="w"&gt; &lt;/span&gt;Emulation&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;Default&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;518&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Rotation&lt;span class="w"&gt; &lt;/span&gt;Angle&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;519&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.000000
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Rotation&lt;span class="w"&gt; &lt;/span&gt;Angle&lt;span class="w"&gt; &lt;/span&gt;Default&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;520&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.000000
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Accel&lt;span class="w"&gt; &lt;/span&gt;Speed&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;521&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;.000000
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Accel&lt;span class="w"&gt; &lt;/span&gt;Speed&lt;span class="w"&gt; &lt;/span&gt;Default&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;522&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.000000
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Accel&lt;span class="w"&gt; &lt;/span&gt;Profiles&lt;span class="w"&gt; &lt;/span&gt;Available&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;523&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Accel&lt;span class="w"&gt; &lt;/span&gt;Profile&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;524&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Accel&lt;span class="w"&gt; &lt;/span&gt;Profile&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;Default&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;525&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Left&lt;span class="w"&gt; &lt;/span&gt;Handed&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;526&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Left&lt;span class="w"&gt; &lt;/span&gt;Handed&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;Default&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;527&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Send&lt;span class="w"&gt; &lt;/span&gt;Events&lt;span class="w"&gt; &lt;/span&gt;Modes&lt;span class="w"&gt; &lt;/span&gt;Available&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;276&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Send&lt;span class="w"&gt; &lt;/span&gt;Events&lt;span class="w"&gt; &lt;/span&gt;Mode&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;277&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Send&lt;span class="w"&gt; &lt;/span&gt;Events&lt;span class="w"&gt; &lt;/span&gt;Mode&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;Default&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;278&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;Device&lt;span class="w"&gt; &lt;/span&gt;Node&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;279&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/dev/input/event18&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;Device&lt;span class="w"&gt; &lt;/span&gt;Product&lt;span class="w"&gt; &lt;/span&gt;ID&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;280&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="m"&gt;1133&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;45085&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Drag&lt;span class="w"&gt; &lt;/span&gt;Lock&lt;span class="w"&gt; &lt;/span&gt;Buttons&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;528&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;       &lt;/span&gt;&amp;lt;no&lt;span class="w"&gt; &lt;/span&gt;items&amp;gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Horizontal&lt;span class="w"&gt; &lt;/span&gt;Scroll&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;529&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Scrolling&lt;span class="w"&gt; &lt;/span&gt;Pixel&lt;span class="w"&gt; &lt;/span&gt;Distance&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;530&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;Scrolling&lt;span class="w"&gt; &lt;/span&gt;Pixel&lt;span class="w"&gt; &lt;/span&gt;Distance&lt;span class="w"&gt; &lt;/span&gt;Default&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;531&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;libinput&lt;span class="w"&gt; &lt;/span&gt;High&lt;span class="w"&gt; &lt;/span&gt;Resolution&lt;span class="w"&gt; &lt;/span&gt;Wheel&lt;span class="w"&gt; &lt;/span&gt;Scroll&lt;span class="w"&gt; &lt;/span&gt;Enabled&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;532&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ここで、マウス速度のパラメーターは、 &lt;code&gt;Coordinate Transformation Matrix (158)&lt;/code&gt; です。&lt;/p&gt;
&lt;h2&gt;マウス速度を設定する&lt;/h2&gt;
&lt;p&gt;マウス速度を設定するには、下のようなコマンドを実行すればよいです。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;xinput&lt;span class="w"&gt; &lt;/span&gt;set-prop&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;12&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;158&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ここで、12はデバイスのid、158はパラメーターのid、5はマウス速度です。&lt;/p&gt;
&lt;p&gt;そのため、&lt;code&gt;~/.zshrc&lt;/code&gt;や&lt;code&gt;~/.bashrc&lt;/code&gt;などに上のコマンドを書き加えておけば、ターミナルを起動するごとにマウスの速度を設定することができます。&lt;/p&gt;
&lt;p&gt;ちなみに、&lt;code&gt;~/.profile&lt;/code&gt;に上のコマンドを書かない理由は、bluetoothマウスだとしばらく動かさないとPCとの接続が切れその結果マウス速度がリセットされてしまうことがあるためです。
言い換えると、bluetooth接続が切れるたびにログアウトしないとマウス速度を設定できなくなるからです。&lt;/p&gt;
&lt;h2&gt;マウスのidが再起動ごとに変わる場合&lt;/h2&gt;
&lt;p&gt;その場合、マウスのidが12以外のこともあるため上のコードを少し変更する必要があります。&lt;/p&gt;
&lt;p&gt;若干汚いコードですが、下のコードを使いました。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;MX_ID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;xinput&lt;span class="w"&gt; &lt;/span&gt;list&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;grep&lt;span class="w"&gt; &lt;/span&gt;MX&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;cut&lt;span class="w"&gt; &lt;/span&gt;-f2&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;cut&lt;span class="w"&gt; &lt;/span&gt;-d&lt;span class="s1"&gt;&amp;#39;=&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-f2&lt;span class="k"&gt;)&lt;/span&gt;
xinput&lt;span class="w"&gt; &lt;/span&gt;set-prop&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MX_ID&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;158&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;まず、&lt;code&gt;xinput list&lt;/code&gt;でデバイスidと名前の一覧を表示します。
その結果をパイプでつなぎ、&lt;code&gt;grep MX&lt;/code&gt;でMXが含まれる行を検索します。
その後、idだけを取り出せるように&lt;code&gt;cut -f2 | cut -d'=' -f2&lt;/code&gt;としています。&lt;/p&gt;
&lt;p&gt;上のようにすれば、MX_IDには私の使っているマウスのIDが代入され、その&lt;code&gt;MX_ID&lt;/code&gt;をxinputで使うことで、idが変わっても同じスクリプトでマウスの速度を設定できます。&lt;/p&gt;
&lt;h1&gt;謝辞&lt;/h1&gt;
&lt;p&gt;上の情報を教えてくださったvim-jpの方々に感謝します。&lt;/p&gt;
&lt;h1&gt;参考サイト&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://askubuntu.com/questions/1067062/change-mouse-speed-on-ubuntu-18-04/1209053#1209053"&gt;unity - Change mouse speed on Ubuntu 18.04 - Ask Ubuntu&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;以下3つは試していないが参考サイト。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://unix.stackexchange.com/questions/422470/how-to-set-device-specific-mouse-settings-in-wayland-under-libinput-debian-gnom"&gt;How to set device-specific mouse settings in Wayland under Libinput (Debian Gnome)? - Unix &amp;amp; Linux Stack Exchange&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pwr-solaar.github.io/Solaar/"&gt;Solaar | Linux Device Manager for Logitech Unifying Receivers and Devices.&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="開発環境"></category><category term="ubuntu"></category></entry></feed>